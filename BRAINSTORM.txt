AIVISION — Eurovision Voting App: Brainstorming Context
=======================================================

WHAT WE HAVE NOW (Current State)
---------------------------------

Tech Stack:
- React 19 (JSX, no TypeScript) + Vite 8 beta + React Router 7
- Supabase (PostgreSQL, Auth, Storage, Realtime)
- Tailwind CSS v4 + CSS variables for theming
- Lucide React icons
- PWA via vite-plugin-pwa (installable, offline support)
- Deployed on Vercel (also Netlify-ready)

Features Already Built:
1. Authentication — Email/password + Google OAuth, profile creation on signup
2. Song Cards Grid — 12 built-in songs (Sweden, Italy, Ukraine, France, Norway, Spain, Greece, Finland, Switzerland, Ireland, Albania, Netherlands), each with country flag, title, artist, genre
3. Video Previews — Hover (desktop) or tap (mobile) to preview song videos on cards
4. Song Detail Modal — Full song view with lyrics, audio player, video background, voting UI, reactions, comments, ratings, karaoke mode, country info
5. Eurovision-style Voting — Points system (1, 2, 3, 4, 5, 6, 7, 8, 10, 12), one vote per user per song
6. Category Ratings — Per-song ratings on Lyrics, Melody, Memorability (1-10 scale)
7. Reactions & Comments — Emoji reactions (heart, fire, clap, music note) and text comments per song
8. Leaderboard — Three views: Song Ratings (average across categories), Votes (total points), and Vote Comparison (your votes vs. community average)
9. Friends System — Add friends, see friend requests, view friends' votes
10. Profile Tab — View/edit name (with 1-week cooldown), avatar upload/crop, friends management
11. Karaoke Mode — Fullscreen lyrics display with audio sync, timing data support
12. Lyrics Player — Synced lyrics that highlight current line during playback
13. Lyrics Timing Editor — Admin tool to set timing for each lyric line
14. Admin Panel (~2,450 lines) — Manage songs, videos, themes, users, custom songs (from Supabase), video position adjustment, lyrics timing
15. Custom Songs — Admin can add songs via Supabase `custom_songs` table (beyond the 12 built-in)
16. Theming — Dark/light mode + 10 preset color themes (Default Purple, Neon Disco, Classic Gold, Nordic Minimal, Retro Synthwave, Pastel Pop, Dark Elegance, Midnight Ocean, Fire & Ice, Tropical Sunset), stored in Supabase
17. Glass Morphism UI — Backdrop blur effects, custom animations (twinkle, float, shimmer, pulse-glow)
18. Confetti Animation — Canvas-based celebration on voting
19. PWA Install Prompt — Smart banner with iOS/Android/Chrome instructions
20. Search & Filter — Search songs by country/title/artist/genre, filter by genre dropdown
21. Toast Notifications — Success/error messages
22. Undo Vote — Ability to undo last vote
23. Voting Deadline — Countdown timer support
24. Realtime Updates — Supabase subscriptions on votes, friends, ratings
25. Skeleton Loading — Loading placeholders for song cards
26. Country Info — Eurovision facts per country (shown in song detail)
27. Cover Art — Upload/display in admin only (not shown in user-facing cards)

Database Tables:
- profiles — user profiles (name, email, avatar_url)
- votes — Eurovision-style point votes per user per song
- ratings — per-category ratings (lyrics, melody, memorable) per user per song
- custom_songs — admin-managed songs beyond built-in 12
- country_videos — video URLs and position data per country
- song_reactions — emoji reactions per user per song
- song_comments — text comments per user per song
- app_settings — key-value store (theme config, voting deadline, etc.)
- friends — friend relationships between users

File Sizes (lines of code):
- index.css: 6,464 lines (all styles)
- AdminPanel.jsx: 2,451 lines
- EurovisionVoting.jsx: 1,030 lines
- SongDetail.jsx: 949 lines
- LyricsTimingEditor.jsx: 602 lines
- Auth.jsx: 403 lines
- LyricsPlayer.jsx: 310 lines
- songs.js: 307 lines (12 built-in songs)
- App.jsx: 273 lines
- KaraokeMode.jsx: 254 lines
- Leaderboard.jsx: 242 lines
- PWAInstallPrompt.jsx: 200 lines
- AvatarCropModal.jsx: 193 lines
- AuthCallback.jsx: 173 lines
- SongCard.jsx: 134 lines
- countryInfo.js: 133 lines
- useFlagColors.js: 121 lines
- ThemeContext.jsx: 90 lines
- Confetti.jsx: 86 lines
- main.jsx: 41 lines
- adminConfig.js: 14 lines
- supabaseClient.js: 5 lines
TOTAL: ~14,500 lines

Architecture Notes:
- No TypeScript — all plain JSX/JS
- No external state management (useState/useCallback/useMemo only)
- No test suite — verify by building
- Mobile-first, responsive grid layout
- Admin access controlled by email whitelist
- Supabase anon key is public (RLS handles security)
- Local storage for votes cache, theme mode, name change cooldown

=========================================================

IDEAS / SUGGESTIONS FOR BRAINSTORMING
=========================================================

Below are concrete improvement ideas organized by category.
Each includes what it is, why it matters, and rough scope.

--- UI/UX IMPROVEMENTS ---

1. SKELETON/SHIMMER ON LEADERBOARD & PROFILE
   Currently only song cards have skeleton loading states. The leaderboard
   and profile tabs load data from Supabase but show nothing until it arrives.
   Add skeleton loaders for the leaderboard rankings list and the profile/friends
   sections to eliminate layout shifts and perceived lag.

2. EMPTY STATES WITH ILLUSTRATIONS
   When a user hasn't voted yet, or has no friends, or there are no comments
   on a song — the sections just show blank space. Add illustrated empty states
   with call-to-action prompts ("No votes yet — tap a song to get started!",
   "No friends added — search for users to connect!").

3. PULL-TO-REFRESH ON MOBILE
   As a PWA used mainly on phones, there's no way to manually refresh data
   without reloading the browser tab. Implement a pull-to-refresh gesture
   that re-fetches votes, ratings, and friends from Supabase.

4. SWIPE GESTURES FOR TAB NAVIGATION
   Users can only tap the tab bar to switch between Songs/My Votes/Leaderboard.
   Adding horizontal swipe gestures between tabs would feel more native on mobile.

5. ANIMATED TRANSITIONS BETWEEN TABS
   Currently switching tabs is an instant swap. Add subtle slide/fade transitions
   to make navigation feel smoother and more polished.

--- NEW FEATURES ---

6. SHARE YOUR VOTES / VOTE CARD
   Let users generate a shareable image (or link) showing their top votes —
   like a "My Eurovision Ballot" card. Great for social sharing. Could use
   html2canvas or a server-side image generator.

7. SONG COMPARISON / HEAD-TO-HEAD
   A fun mode where users are shown two songs side-by-side and pick which
   one they prefer. Results build a separate "duel ranking." Gamifies the
   experience and drives more engagement.

8. PREDICTION GAME / BRACKET
   Let users predict the final ranking before results are in. After the event,
   compare predictions to actual results and award points for accuracy.
   Leaderboard for best predictor among friends.

9. LIVE WATCH PARTY MODE
   A synchronized experience where a group of friends watches together.
   Show real-time reactions, vote reveals after each song, and a group
   chat. Could use Supabase Realtime channels.

10. NOTIFICATION SYSTEM
    Push notifications (via PWA service worker) for:
    - Friend requests received
    - Friends who just voted
    - Voting deadline approaching
    - New songs added by admin
    Currently there's no way to know about activity without opening the app.

11. ACHIEVEMENT / BADGE SYSTEM
    Award badges for milestones: "Voted on all songs", "First to vote",
    "Rated every category", "Added 5 friends", "Karaoke King" (used karaoke
    mode 10 times). Shown on profile. Adds gamification and return visits.

12. SONG STATISTICS / ANALYTICS PAGE
    A deeper analytics view per song: vote distribution histogram, rating
    breakdown chart (average lyrics vs melody vs memorable), total reactions
    count, comment word cloud. More data-driven than the current leaderboard.

13. USER ACTIVITY FEED
    A timeline showing recent activity: "Alice voted 12 pts for Sweden",
    "Bob commented on Italy", "Carol added you as a friend". Makes the
    social aspect more visible and engaging.

14. SPOTIFY / YOUTUBE INTEGRATION
    Link each song to its Spotify track or YouTube video. Let users listen
    to the full song without leaving the app (embed player) or open it
    in Spotify. Enhances the music discovery aspect.

--- TECHNICAL / PERFORMANCE ---

15. CODE SPLITTING & LAZY LOADING
    AdminPanel.jsx alone is 2,450 lines and only used by admins. Lazy-load
    it with React.lazy + Suspense so regular users never download it.
    Same for KaraokeMode, LyricsTimingEditor, and AvatarCropModal.

16. MOVE INLINE STYLES TO CSS CLASSES
    Auth.jsx and several other components use extensive inline styles.
    This hurts readability, prevents hover/focus pseudo-class usage,
    and bloats the JSX. Migrate to Tailwind classes or CSS modules.

17. IMAGE/VIDEO OPTIMIZATION
    Song card videos are loaded with preload="metadata" but there's no
    lazy loading based on viewport visibility. Use IntersectionObserver
    to only load video elements when cards scroll into view. Consider
    poster images for video thumbnails.

18. ACCESSIBILITY AUDIT
    - Missing aria-labels on icon-only buttons (theme toggle, sign out)
    - No keyboard navigation support for the voting slider
    - Low contrast text in some theme combinations
    - No skip-to-content link
    - Focus trapping missing in modals (SongDetail, AvatarCropModal)
    - Screen reader announcements for toast messages

19. ERROR BOUNDARY IMPROVEMENTS
    main.jsx has an ErrorBoundary but individual routes/components don't.
    A Supabase outage would crash the whole app. Add granular error
    boundaries around the leaderboard, song detail, and admin panel.

--- SOCIAL / ENGAGEMENT ---

20. GROUP VOTING ROOMS
    Create a "room" with a code that friends join. Everyone votes in the
    same room, and the room has its own leaderboard. Good for watch parties,
    office pools, or friend group competitions.

21. COMMENTS THREADING / REPLIES
    Currently comments are flat. Add reply-to functionality so users can
    have conversations about songs. Also consider upvoting comments.

22. USER PROFILES WITH VOTING HISTORY
    When you tap on a friend's name, see their full voting history,
    favorite genres, and how their votes compare to the community.
    Currently friends' votes are visible but there's no dedicated
    profile page for other users.

--- CONTENT ---

23. DYNAMIC SONG MANAGEMENT VIA ADMIN
    The 12 built-in songs in songs.js are hardcoded. While custom_songs
    exists in Supabase, the workflow could be smoother. Consider making
    ALL songs come from Supabase so admins have full control without
    code deployments. The built-in songs could be a seed/migration.

24. COVER ART ON USER-FACING CARDS
    Cover art (cover_url) is currently only shown in the Admin Panel.
    Displaying it on song cards and in the detail view would make the
    UI much richer and more visually appealing. This is a quick win.

25. MULTILINGUAL SUPPORT (i18n)
    Eurovision is an international event. Supporting multiple languages
    (at minimum English + the song's native language for lyrics) would
    be inclusive. Could use react-i18next for UI strings.

=========================================================

KNOWN TECHNICAL DEBT / ISSUES
=========================================================

- AdminPanel.jsx is 2,450 lines — should be broken into sub-components
- EurovisionVoting.jsx is 1,030 lines — profile tab logic could be extracted
- index.css is 6,464 lines — could benefit from organization/splitting
- Auth.jsx uses inline styles + a `<style jsx>` block (not actual CSS-in-JS)
- No TypeScript — type safety relies entirely on developer discipline
- No tests — changes are verified only by successful builds
- The `friends` table exists in production but not in the migration file
- Forgot Password button exists in UI but has no handler attached
- The close (X) button on the Auth page doesn't do anything
- 13 npm vulnerabilities (3 moderate, 10 high) from audit

=========================================================

Use this document as context when brainstorming next steps,
prioritizing features, or discussing architecture decisions.
